\input{tufte_preamble.tex}

\title[Solutions to Algebraic Geometry by Robin Hartshorne]{\setlength{\parindent}{0pt}Solutions \\to \\Hartshorne} % Title of the book
\author{Isaac Martin} % Author
\date{Fall 2023}

\begin{document}

\maketitle
\tableofcontents % Print the table of contents

%----------------------------------------------------------------------------------------

%\listoffigures % Print a list of figures

%----------------------------------------------------------------------------------------

%\listoftables % Print a list of tables

\setcounter{chapter}{1}
\chapter{Schemes}
\section{Sheaves}

\begin{problemset}
	\item Let $A$ be an abelian group and defined the \emph{constant presheaf} associated to $A$ on the topological space $X$ to be the preshseaf $U\mapsto A$ for all $U\neq \emptyset$, with restriction maps the identity. Show that the constant sheaf $\cA$ defined in the text is the sheaf associated to this presheaf.
	\begin{proof}
		Let $\cC$ be the constant sheaf on $X$, i.e. the sheaf defined as follows: for any open $U\subseteq X$, $\cC(U)$ is the group of all continuous maps of $U$ into $A$ (where $A$ is endowed with the discrete topology). Let $\cG$ be any other sheaf on $X$.

		Define $\theta:\cF\to \cC$ as follows. For an open set $U$, let $\theta(U):\cF(U) = A\to \cC(U)A$ send a point $a \in A$ to the constant map $(x \mapsto a)\in \cC(U)$.

		Now suppose we have some morphism $\alpha:\cF\to \cG$. We would like to define $\beta:\cC\to \cG$ such that $\beta\circ\theta = \alpha$.

		Fix an open subset $U \subseteq X$ and a section $f:U\to A$ of $\cC(U)$. Notice that $\{f^{-1}(a)\}_{a\in A}$ is an open cover of $U$ and $f|_{f^{-1}(a)} = (x\mapsto a) = \theta(U)(a)$ for all $a \in A$. Consider the collection $\{\alpha(U)(a)\}_{a\in A}$ of sections in $\cG(U)$. These satisfy the gluing compatibility condition, namely
		\begin{align*}
			\alpha(U)(a)|_{f^{-1}(a)\cap f^{-1}(b)} = \alpha(U)(b)|_{f^{-1}(a)\cap f^{-1}(b)}
		\end{align*}
		and hence there is some element $g_f \in \cG(U)$ such that $g_f|_{f^{-1}(a)} = \alpha(U)(a)|_{f^{-1}(a)}$ for all $a \in A$. We simply define $\beta(U)(f) = g_f$ to obtain a map $\beta(U):\cC(U)\to \cG(U)$. This satisfies the restriction requirements and hence $\beta$ is a map of schemes. Furthermore, if $f = \theta(U)(a)$ for some $a \in A$, then $f$ is the constant map $x \mapsto a$ and hence $f^{-1}(a) = U$, so $\beta(f) = \alpha(U)(a)$. This shows that $\alpha = \beta\circ \theta$, meaning $\cC$ satisfies the universal property of the sheaf associated to $\cF$.
	\end{proof}
\item\label{prob:2_1_2} $ $
	\begin{enumerate}[(a)]
		\item For any morphism of sheaves $\varphi:\cF\to \cG$ show that for each point $P$, $(\ker\varphi)_P = \ker(\varphi_P)$ and $(\im\varphi)_P = \im(\varphi_P)$
		\item Show that $\varphi$ is injective (respectively, surjective) if and only if the induced map on the stalks $\varphi_P$ is injective (respectively, surjective) for all $P$.
		\item Show that a sequence $...\to \cF^{i-1}\xrightarrow{\varphi^{i-1}} \cF^i \xrightarrow{\varphi^i}\cF^{i+1}\to ...$ of sheaves and morphisms is exact if and only if for each $P\in X$ the corresponding sequence of stalks is exact as a sequence of abelian groups.
	\end{enumerate}
	\begin{proof}$ $
		\begin{enumerate}[(a)]
			\item Recall that for any $V\subseteq X$ containing a point $P$ we have the diagram
				\begin{center}
					\begin{tikzcd}
						\cF(V) \arrow[r,"\varphi(V)"] \arrow[d,"\pi"]& \cG(V) \arrow[d,"\pi"] \\
						\cF_P \arrow[r,"\varphi_P"]&\cG_P
					\end{tikzcd}
				\end{center}
				Start with an element $(t,V) \in \ker (\varphi_P)$. Then $t$ is a section of $\cF(V)$ by definition and by commutativity of the diagram we have that $\pi(\varphi(V)(t)) = (\varphi(V)(t),V) = 0$ in $\cG_P$. This means that there is some open neighborhood $W\subset V$ of $P$ such that $\varphi(U)(t)|_W = 0$ by the equivalence relation on $\cG_P$, and since $\varphi(U)(t)|_W = \varphi(W)(t)$ we have that $\varphi(W)(t|_W) = 0$. Hence $t|_W = 0$ and so $t \in \ker\varphi(W)$. Hence $(t|_W,W) \in (\ker \varphi)_P$, and because $(t|_W,W)$ and $(t,V)$ represent the same element in $\ker (\varphi_P)$, this shows the inclusion $\ker(\varphi_P) \subseteq (\ker \varphi)_P$.

				For the other inclusion, take an element $(t,V) \in (\ker\varphi)_P$. This means that $t \in (\ker\varphi)(V) = \ker(\varphi(V))$ and hence $\varphi(V)(t) = 0$ in $\cG(V)$. Composing with $\pi$ gives $\pi(\varphi(V)(t)) = (\varphi(V)(t),V) = 0$ in $\cG_P$. By commutativity, $\pi((t,V)) = (t,V)\in \cF_P$ maps to $0$ under $\varphi_P$, so $(t,V)\in \ker(\varphi_P)$. This gives us the other inclusion.

				\bigskip

                Now let's consider $\im\varphi$. Let $\im^{pre}\varphi$ denote the image presheaf and recall that sheafification preserves stalks: $(\im^{pre}\varphi)_P = (\im\varphi)_P$. By the same diagram as before we have that for $t\in \mathcal F(V)$,
                \begin{align*}
                  \varphi_P(t,V) = \varphi_P(\pi(t)) = \pi(\varphi(V)(t)) = (\varphi(V)(t),V).
                \end{align*}
                Every element $\varphi_P(t,V)\in \im(\varphi_P)$ can therefore be written as the projection of an element $(\varphi(V)(t),V)\in \mathcal G(V)$, and vice versa. This gives both inclusions.
			\item Recall that a map of sheaves is said to be injective if $\ker\varphi = 0$. By part (a), if $\ker\varphi = 0$ then $\ker(\varphi_P) = (\ker \varphi)_P = 0$, and hence $\varphi_P$ is injective. Likewise, if $\varphi_P$ is injective for each $P\in X$, then for any open set $U \subset X$ and any section $s \in \mathcal U$, $\ker\varphi(U)(s)|_P = 0$. This means there is an open cover $\{U_i\}$ of $U$ such that $\ker\varphi(U)(s)|_{U_i} = 0$ for each $i$, and hence $\ker\varphi(U)(s) = 0$. \sidenote{Notice I assumed these are sheaves valued in some abelian category, if this isn't the case then you need to argue slightly differently.}

			\bigskip

			We say that $\varphi$ is surjective if $\im\varphi = \mathcal G$. If $\im \varphi$ is surjective, then $(\im\varphi)_P = \mathcal G_P$ for any $P\in X$. Sheafification preserves stalks, so we may think of $(\im\varphi)_P$ as the stalk of the image presheaf, meaning that for each germ $(s,U) \in (\im\varphi)_P$ we have a corresponding germ $(t,U)\in \mathcal F_P$ satisfying $\varphi(U)(t) = s\in \mathcal G(U)$, and hence $\varphi_P(t) = s$. This shows $\varphi_P$ is surjective for each $P$. Now assume the converse, \ie that $\varphi_P$ is surjective for each $P\in X$. Fix an open set $U\subset X$ and consider a section $s\in \mathcal \mathcal G(U)$. Due the to surjectivity of $\varphi_P$, at each $P \in U$ there is some germ $t_P \in \mathcal F_P$ such that $\varphi_P(t_P) = s_P$. Define a function $r:U\to \bigcup_{P\in U}\mathcal G_P$ by $r(P) = \varphi_P(t_P) = s_P$. We need only check that $r$ is a section of $\im\varphi(U)$. Indeed, by the surjectivity of $\varphi_P$, for each $P$ there is some neighborhood $V$ of $P$ and a section $a \in \mathcal F(V)$ such that $\varphi(V)(a) = s|_V$. Therefore
			\begin{align*}
				r(Q) = \varphi(V)(a)_Q = (s|_V)_Q = s_Q
			\end{align*}
			for each $Q \in V$. Thus $r$ satisfies both conditions defining sections of $\im\varphi$ and is therefore a section. Repeating this construction for each $s\in \mathcal G$ and sending $r\mapsto s$ gives us an identification $\im\varphi = \mathcal G$, and we conclude that $\varphi$ is surjective.

		\item A sequence of sheaves and morphisms $...\to \mathcal F^{i-1}\xrightarrow{\varphi^{i-1}} \mathcal F^i\xrightarrow{i} ...$ is said to be exact if and only if $\ker\varphi^{i} = \im\varphi^{i-1}$ for each $i$. If this is the case, then taking limits of restriction maps give us an exact sequence on stalks for each $P$. Likewise, if $...\to \mathcal F^{i-1}_P\xrightarrow{\varphi^{i-1}_P} \mathcal F^i\xrightarrow{i}_P ...$ is exact for each $P$, then $\im\varphi{i-1}_P = \ker\varphi^{i}_P$ for each $P$. This means $\im\varphi^{i-1}$ surjects onto the subsheaf $\ker\varphi^i$ of $\mathcal F^i$ by part (b). \sidenote{Surely there's more to say here, but this seems like enough... perhaps more detail on the ``exact implies exact on stalks'' direction.}
	  \end{enumerate}
	\end{proof}
	\item
	\begin{enumerate}[(a)]
		\item  Let $\varphi:\cF\to \cG$ be a morphism of sheaves on $X$. Show that $\varphi$ is surjective if and only if the following condition holds: for every open set $U\subseteq X$, and for every $s \in \cG(U)$, there is a covering $\{U_i\}$ of $U$ and there are elements $t_i \in \cF(U_i)$ such that $\varphi(t_i) = s|_{U_i}$ for all $i$.
		\item Give an example of a surjective morphism of sheaves $\varphi:\cF\to \cG$ and an open set $U$ such that $\varphi(U):\cF(U)\to \cG(U)$ is not surjective.
	\end{enumerate}
	\begin{proof}$ $
		\begin{enumerate}[(a)]
			\item Suppose $\varphi:\mathcal F\to \mathcal G$ is surjective. Fix an open set $U$ and a section $s\in \mathcal G(U)$. For each $P$ we have a surjection $\varphi_P:\mathcal F_P \to \mathcal G_P$ by Problem \ref{prob:2_1_2}, meaning that at each $P$ we have some germ $(t_P,V_P) \in \mathcal F_P$ such that $\varphi(V_P)(t_P) = s|_P$, after perhaps redefining the open set $V_P$ (note that here, $t_P$ denotes a section of $\mathcal F(V_P)$ and note a germ in $\mathcal F_P$). The cover $\{V_P\}_{P\in U}$ together with the collection of sections $t_P \in \mathcal F(V_P)$ then satisfies the desired condition.

			Conversely, if $\varphi$ satisfies this condition, then we easily see it is surjective on stalks and is hence surjective by Problem \ref{prob:2_1_2}.

			\item Let $X = \mathbb C$ with the usual topology, $\mathcal F$ the presheaf of bounded holomorphic functions and 
		\end{enumerate}
	\end{proof}
\item \label{prob:2_1_4}
	\begin{enumerate}[(a)]
		\item Let $\varphi:\mathcal F\to \mathcal G$ be a morphism of presheaves such that $\varphi(U):\mathcal F(U)\to \mathcal G(U)$ is injective for each $U$. Show that the induced map $\varphi^+:\mathcal F^+ \to \mathcal G^+$ of associated sheaves is injective.
		\item Use part (a) to show that if $\varphi:\mathcal F\to \mathcal G$ is a morphism of sheaves, the $\im \varphi$ can be naturally identified with a subsheaf of $\mathcal G$ as mentioned in the text.
	\end{enumerate}
	\begin{proof}$ $
		\begin{enumerate}[(a)]
			\item The map $\varphi^+$ is induced by the following diagram:
				\begin{center}
					\begin{tikzcd}
					\mathcal F\arrow[r,"\varphi"] \arrow[d,"\theta_F"] & \mathcal G \arrow[d, "\theta_G"] \\
					\mathcal F^+\arrow[r,"\varphi^+"] &\mathcal G^+	
					\end{tikzcd}
				\end{center}
				Where $\theta_F:\mathcal F\to \mathcal F^+$ is defined on an open set $U$ and a section $s\in \mathcal F(U)$ by
				\begin{align*}
					s\mapsto (f_s:P\mapsto s_P).
				\end{align*}
				This means $\varphi^+(U)$ is simply given by composition with $\varphi$ stalkwise, i.e. for a section $s\in \mathcal F^+$ and denoting $t = \varphi^+(U)(s) \in \mathcal G^+$, $t$ is defined $t(P) = \varphi_P\circ s(P).$ Notice that in Problem \ref{prob:2_1_2}, the proof that if $\varphi:\mathcal F\to \mathcal G$ is injective then $\varphi_P:\mathcal F_P\to \mathcal G_P$ is injective for each $P$ only required that $\mathcal F$ and $\mathcal G$ were presheaves (the converse required that they be sheaves). Thus, $\varphi_P:\mathcal F_P\to \mathcal G_P$ is injective for each $P\in U$.
			\item Let $\im^p\varphi$ denote the image presheaf $U\mapsto \im(\varphi(U)).$ Consider the inclusion map $\iota:\im^p\varphi \to \mathcal G$ given by the inclusions $\im(\varphi(U)) \hookrightarrow \mathcal G(U)$. This is a morphism of presheaves, and it is clearly injective for each $U$. There is then an induced map of sheaves $\iota^+: \im\varphi \to \mathcal G$ which is also injective by part (a)\sidenote{Here we've implicitly sheafified, replacing $\im^p\varphi$ with its sheafification and leaving $\mathcal G$ as-is since the sheafification of a sheaf is canonically isomorphic to the original sheaf.}. This allows us to identify $\im\varphi$ with a subsheaf of $\mathcal G$: $\im\varphi(U) = \iota^+(\im\varphi(U)) \subset \mathcal G(U)$.
		\end{enumerate}
	\end{proof}

\item Show that a morphism of sheaves is an isomorphism if and only if it is both injective and surjective.
	\begin{proof}
		Proposition 1.1 in Hartshorne Chapter II says that a morphism of sheaves $\varphi:\mathcal F\to \mathcal G$ is an isomorphism if and only if $\varphi_P:\mathcal F_P\to \mathcal G_P$ is an isomorphism on the level of stalks for each $P\in X$. By Problem \ref{prob:2_1_2} (b), $\varphi$ is injective (resp. surjective) if and only if $\varphi_P$ is injective (resp. surjective) for each $P$. This gives us the desired conclusion.\sidenote{There is a subtlety here: two sheaves might have isomorphic stalks at every point but not be isomorphic. Proposition 1.1 says that an isomorphism on stalks is an isomorphism of sheaves if and only if the isomorphisms of stalks comes from a morphism of sheaves. This argument therefore only works because we started with a morphism of sheaves.}
	\end{proof}
\item
	\begin{enumerate}[(a)]
		\item Let $\mathcal F'$ be a subsheaf of a sheaf $\mathcal F$. Show that the natural map of $\mathcal F$ to the quotient sheaf $\mathcal F/\mathcal F'$ is surjective, and has kernel $\mathcal F'$. Thus there is an exact sequence
			\begin{align*}
				0 \to \mathcal F' \to \mathcal F\to \mathcal F/\mathcal F' \to 0.
			\end{align*}
		\item Conversely, if $0\to \mathcal F'\to \mathcal F\to \mathcal F''\to 0$ is an exact sequence, show that $\mathcal F'$ is isomorphic to a subsheaf of $\mathcal F$ and that $\mathcal F''$ is isomorphic to the quotient of $\mathcal F$ by this subsheaf.
	\end{enumerate}
	\begin{proof}$ $
		\begin{enumerate}[(a)]
			\item Let $\varphi:\mathcal F\to \mathcal F/\mathcal F'$ denote the natural map given by sheafifying $\mathcal F(U)\to \mathcal F(U)/\mathcal F'(U)$. To show this is surjective, it suffices to show it is surjective on stalks, but this is clear since the map $\varphi_P:\mathcal F_P \to (\mathcal F/\mathcal F')_P = \mathcal F_P/\mathcal F'_P$ is the obvious one. Now take an element $s\in \mathcal F(U)$ such that $\varphi(U)(s) = 0$. Then $\varphi(U)(s)_P = \varphi_P(s_P) = 0$ for each $P\in U$, and hence $s_P \in \ker \varphi_P = \mathcal F'_P$. By the gluing axiom we have that $s\in \mathcal F'$, which gives us the inclusion $\ker\varphi(U)\subseteq \mathcal F'(U)$. For the other inclusion, take a section $s\in \mathcal F'(U)$ and note that $s_P \in \mathcal F'_P = \ker\varphi_P$. We therefore have an exact sequence as described.

			\item Consider an exact sequence
				\begin{align*}
					0 \to \mathcal F'\xrightarrow{\alpha} \mathcal F\xrightarrow{\beta} \mathcal F'' \to 0.
				\end{align*}
				Problem \ref{prob:2_1_4} showed that $\im\alpha$ can indeed be identified with a subsheaf and exactness tells us that subsheaf is $\ker\beta$, giving us the first half of the problem. Any section $s\in \mathcal F'(U)$ gets killed by $\beta\circ \alpha$ at every stalk due to exactness, hence by sheaf axioms $\beta(\alpha(s)) = 0$ in $\mathcal F''(U)$. Thus we get a morphism $\mathcal F(U)/\mathcal F'(U)\to \mathcal F''(U)$ for each $U$, giving us a morphism of presheaves, and after sheafifying this becomes a morphism $(\mathcal F/\mathcal F')(U) = \mathcal F'' (U)$. This is injective and surjective on stalks, seen simply by checking the exact sequence, and is therefore an isomorphism on stalks by \ref{prob:2_1_2}. We conclude that it is an isomorphism of sheaves, giving us the second half of the problem.
		\end{enumerate}
	\end{proof}
\item Let $\varphi:\mathcal F\to \mathcal G$ be a morphism of sheaves.
	\begin{enumerate}[(a)]
		\item Show that $\im\varphi \cong \mathcal F/\ker \varphi$.
		\item Show that $\coker\varphi\cong \mathcal G/\im \varphi$.
	\end{enumerate}
	\begin{proof}$ $
		\begin{enumerate}[(a)]
			\item This sort of argument is becoming a little more standard\sidenote{Notice the general pattern here: we want to show two sheaves are isomorphic, but we only know that they or the presheaves from whence they come are isomorphic at each $U$. We check compatibility of these isomorphisms with restriction maps to argue we have an isomorphism of presheaves. Sheafifying yields us morphisms of sheaves and preserves stalks. Because the stalks were isomorphic in the presheaf picture, the morphism of sheaves is an isomorphism.}. We first note that, for each $U$, we have the following diagram:
				\begin{center}
					\begin{tikzcd}
						\mathcal F(U) \arrow[r,"\varphi(U)"]\arrow[rd, "\pi(U)"]& \im(\varphi(U)) \arrow[hook]{r}&\mathcal G(U) \\
																				& \mathcal F(U)/\ker\varphi(U) \arrow[u, dashed, "\alpha(U)"] &
					\end{tikzcd}
				\end{center}
				by the first isomorphism theorem of whatever abelian category in which we happen to be working. The map $\alpha$ is simply $\varphi$ applied to representatives of cosets, it's well defined because everything in $\ker\varphi(U)$ is sent to zero in $\mathcal G(U)$ and it is an isomorphism onto its image which is $\im(\varphi(U))$ by definition. This is compatible with restriction maps and hence this yields a diagram of presheaves. Sheafifying gives us a corresponding diagram of sheaves:
				\begin{center}
					\begin{tikzcd}
						\mathcal F \arrow[r,"\varphi"]\arrow[rd, "\pi"]& \im\varphi \arrow[hook]{r} & \mathcal G\\
																	   & \mathcal F/\ker\varphi \arrow[u, dashed, "\alpha"] &
					\end{tikzcd}
				\end{center}
				Sheafification may have changed the sets $\im(\varphi(U))$ and $\im(\alpha(U))$ for various $U$. However, it preserves stalks, hence $\alpha_P$ is still an isomorphism $\im\varphi_P \cong (\mathcal F/\ker \varphi)_P$ at each $P$. This means $\alpha$ is an isomorphism by Proposition 1.1 in Hartshorne Chapter II\sidenote{We could have concluded simply by stating that the sheafification functor sends isomorphisms to isomorphisms.}.

			\item The sequence
				\begin{align*}
					0 \to \im(\varphi(U)) \to \mathcal G(U) \to \coker \varphi(U) \to 0
				\end{align*}
				is exact for each $U$ and compatible with restriction maps, hence sheafifying yields a sequence
				\begin{align*}
					\im \varphi \to \mathcal G\to \coker\varphi.
				\end{align*}
				This is exact on stalks and hence is exact as a sequence of sheaves by Problem \ref{prob:2_1_2}. Applying the result of Problem \ref{prob:2_1_4} proves that $\mathcal G/\im \varphi \cong \coker \varphi$.
		\end{enumerate}
	\end{proof}
	\item For any open subset $U\subseteq X$, show that the functor $\Gamma(U,\cdot)$ from sheaves on $X$ to abelian groups is a left exact functor, i.e., if $0\to \mathcal F'\to \mathcal F\to \mathcal F''$ is an exact sequence of sheaves, the $0\to \Gamma(U,\mathcal F') \to \Gamma(U,\mathcal F)\to \Gamma(U, \mathcal F'')$ is an exact sequence of groups. The functor $\Gamma(U,\cdot)$ need not be exact; see Exercise \ref{prob:2_1_21} below.
	\begin{proof}
		Label the relevant maps of the exact sequence: $0\to \mathcal F\xrightarrow{\alpha}\mathcal F\xrightarrow{\beta} \mathcal F''$. A map of sheaves is injective if and only if it is injective on sections, hence $0 \to \Gamma(U,\mathcal F') \xrightarrow{\alpha(U)} \Gamma(U,\mathcal F)$ is exact (i.e. $\alpha(U)$ is injective). We only need to show that $\im\alpha (U) = \ker \beta (U)$.

		Take a section $s\in \mathcal F'(U)$. Compatibility with restrictions gives us
		\begin{align*}
			(\beta_U\circ \alpha_U)(s)_P 
			&= \varinjlim_{U\supset V \ni P} (\beta_U\circ \alpha_U)(s)|_V \\
			&= \varinjlim_{U\supset V\ni P} (\beta_U\circ \alpha_U)(s|_V) \\
			&= \beta_P\circ \alpha_P (s_P) = 0
		\end{align*}
		with the last equality following from the exactness on stalks. Since $\beta_U\circ \alpha_U(s)$ is zero at every stalk, sheaf axioms give us that $\beta_U\circ \alpha_U(s)$ itself is zero, and hence $\ker \beta_U\supseteq \im\alpha_U$.

		Now suppose we start with a section $s\in \ker\beta_U$. A similar argument above tells us that, at each $P$, there is a germ $t_P = (V_i, t_i) \in \mathcal F'_P$ (using an intermediate index $i$ determined by each $P$ to avoid confusion between the element $t_P \in \mathcal F'_P$ and $t_i \in \mathcal F'(V_i)$) such that $\alpha_P(t_P) = s_P$. After perhaps shrinking $V_i$, we can assume that $\alpha_P(t_P) = (V_i, s|_{V_i})$, the representative of $s_P$ in $\mathcal F_P$, and hence $\alpha_{V_i}(t_i) = s|_{V_i}$. Since
		\begin{align*}
			\alpha_{V_i}(t_i)|_{V_i\cap V_j} = (s|_{V_i})|_{V_i\cap V_j} = (s|_{V_j})|_{V_i\cap V_j} = \alpha_{V_j}(t_j)|_{V_i\cap V_j},
		\end{align*}
		the collection of sections $\{\alpha_{V_i}(t_i)\}_{i}$ agree on overlaps. Since $\alpha$ is injective\sidenote{Notice that injectivity of $\alpha$ is crucial here!} on sections, it must be the case that $t_i|_{V_i \cap V_j} = t_j|_{V_i\cap V_j}$. By the gluing axiom, there exists some section $t\in \mathcal F'(U)$ such that $t|_{V_i} = t_i$. But then
		\begin{align*}
			\alpha_U(t)|_{V_i} = \alpha_{V_i}(t|_{V_i}) = \alpha_{V_i}(t_i) = s|_{V_i},
		\end{align*}
		and since $\alpha_U(t)$ and $s$ agree on a cover of $U$, they must be the same section in $\mathcal F$. This gives us the second inclusion $\ker\beta_U\subseteq \im\alpha_U$, and we are done.
	\end{proof}
\item \emph{Direct sum}. Let $\mathcal F$ and $\mathcal G$ be sheaves on $X$. Show that the presheaf $U\mapsto \mathcal F(U)\oplus \mathcal G(U)$ is a sheaf. It is called the \emph{direct sum} of $\mathcal F$ and $\mathcal G$, and is denoted by $\mathcal F\oplus \mathcal G$. Show it plays the role of direct sum and of direct product in the category of sheaves of abelian groups on $X$.
\begin{proof}
	We first show $\mathcal F\oplus \mathcal G$ as defined is a sheaf.

\emph{Locality:} Suppose we have a cover $V_i$ of $U$ and a section $(s,t) \in \mathcal F(U)\oplus \mathcal G(U)$ such that $(s,t)|_{V_i} = 0$ for all $i$. By definition $(s,t)|_{V_i} = (s|_{V_i}, t|_{V_i}) = 0 = (0,0)$, and hence by the locality of $\mathcal F$ and $\mathcal G$ we have $(s,t) = 0$.

\emph{Gluing} Suppose we have a cover $V_i$ of $U$ and sections $(s_i,t_i) \in \mathcal F(V_i)\oplus \mathcal G(V_i)$ which agree on overlaps. Then there are sections $s \in \mathcal F(U)$ and $t\in \mathcal G(U)$ such that $(s|_{V_i}, t|_{V_i}) = (s_i,t_i)$ for each $i$, hence $(s,t)|_{V_i} = (s_i,t_i)$. 

Thus $\mathcal F\oplus \mathcal G$ is a sheaf. Given morphisms $f:\mathcal F\to \mathcal H$ and $g:\mathcal G\to \mathcal H$ we obtain a unique morphism $\mathcal F(U)\oplus \mathcal G(U) \to \mathcal H(U)$ for each open set $U$. This morphism is compatible with the restriction maps, and hence we get a (unique) morphism of sheaves $\mathcal F\oplus\mathcal G\to \mathcal H$. The direct product case is similar. \sidenote{I'm not sure what else to say here without putting together a formal category theoretic argument, which feels like overkill.}
\end{proof}
\item \emph{Direct Limit}. Let $\{\mathcal F_i\}$ be a direct system of sheaves and morphisms on $X$. We define the \emph{direct limit} of the system $\{\mathcal F_i\}$, denoted $\varprojlim \mathcal F_i$, to be the sheaf associated to the presheaf $U\mapsto \varprojlim \mathcal F_i(U)$. Show that this is a direct limit in the category of sheaves on $X$, i.e., that it has the following universal property: given a sheaf $\mathcal G$, and a collection of morphisms $\mathcal F_i \to \mathcal G$, compatible with the maps of the direct system, then there exists a unique map $\varprojlim \mathcal F_i \to \mathcal G$ such that for each $i$, the original map $\mathcal F_i \to \mathcal G$ is obtained by composing the maps $\mathcal F_i\to \varprojlim \mathcal F_i \to \mathcal G$.
	\begin{proof}
		
	\end{proof}
\item Let $\{\mathcal F_i\}$ be a direct system of sheaves on a Noetherian topological space $X$. In this case show that the presheaf $U\mapsto \varprojlim \mathcal F_i(U)$ is already a sheaf. In particular, $\Gamma(X,\varprojlim \mathcal F_i) = \varprojlim \Gamma(X,\mathcal F_i)$.
	\begin{proof}
		
	\end{proof}
\item \emph{Inverse Limit.} Let $\{\mathcal F_i\}$ be an inverse system of sheaves on $X$. Show that the presheaf $U\mapsto \varinjlim \mathcal F_i(U)$ is a sheaf. It is called the \emph{inverse limit} of the system $\{\mathcal F_i\}$, and is denoted by $\varinjlim \mathcal F_i$. Show that it has the universal property of an inverse limit in the category of sheaves.
	\begin{proof}
		
	\end{proof}

\item \emph{Espace \'Etal\'e of a Presheaf}. (This exercise is included only to established the connection between our definition of a sheaf and another definition often found in the literature.) Given a presheaf $\mathcal F$ on $X$, we define a topological space $\Spe(\mathcal F)$ called the \emph{espace \'etal\'e} of $\mathcal F$, as follows. As a set, $\Spe(\mathcal F) = \bigcup_{P\in X} \mathcal F_P$. We define a projection map $\pi:\Spe(\mathcal F)\to X$ by sending $s\in \mathcal F_P$ to $P$. For each open set $U\subseteq X$ and each section $s\in \mathcal F(U)$, we obtain a map $\ols : U\to \Spe(\mathcal F)$ by sending $P\mapsto s_P$, its germ at $P$. This map has the property that $\pi\circ \overline s = \id_U$, in other words, it is a ``section'' of $\pi$ over $U$. We now make $\Spe(\mathcal F)$ into a topological space by giving it the strongest topology such that all the maps $\overline s:U\to \Spe(\mathcal F)$ for all $U$, and all $s\in \mathcal F(U)$, are continuous. Now show that the sheaf $\mathcal F^+$ associated to $\mathcal F$ can be described as follows: for any open set $U\subseteq X$, $\mathcal F^+(U)$ is the set of \emph{continuous} sections of $\Spe(\mathcal F)$ over $U$. In particular, the original presheaf $\mathcal F$ was a sheaf if and only if for each $U$, $\mathcal F(U)$ is equal to the set of all continuous sections of $\Spe(\mathcal F)$ over $U$.
	\begin{proof}
		
	\end{proof}

\item Let $\cF$ be a sheaf on $X$, and let $s \in \cF(U)$ be a section over an open set $U$. The \emph{support} of $s$, denote $\Supp s$ is defined to be $\{P \in U \mid s_P \neq 0\}$, where $s_P$ denotes the germ of $s$ in the stalk of $\cF_P$. Show that $\Supp s$ is a closed subset of $U$. We define the \emph{support} of $\cF$ $\Supp \cF$, to be $\{P\in X \mid \cF_P \neq 0\}$. It need not be a closed subset.
	\begin{proof}
		Consider the set $V = \{P \in U \mid s_P = 0\}$. For each $P\in V$ there then exists some $W_P$ containing $P$ and open in $V$ such that $s_P = (s|_{W_P}, W_P) = 0$, i.e. so that $s|_{W_P} = 0$. We then have that $V = \bigcup_{P \in V} W_P$, and hence $V$ is open. Because $\Supp s$ is the complement of $V$ it is closed.

		An example of a sheaf whose support is not a closed set in $U$ is $j_!\bZ$. Here $j:U\to X$ is the inclusion and $j_!:\Sh(U,\bZ)\to \Sh(X,\bZ)$ is the functor where $j_!\cF$ is the sheaf associated to the presheaf
		\begin{align*}
			V \mapsto
			\begin{cases}
				\cF(V) &\text{if } V\subseteq U \\
				0 & \text{otherwise}
			\end{cases}.
		\end{align*}
		The sheaf $j_!\cF$ has the property that $(j_!\cF)_x = \cF_x$ if $x \in U$ and is $0$ otherwise. Hence, the support of $j_!\bZ$ is simply $U$, which is open, not necessarily closed.
	\end{proof}
	\item Sheaf $\sHom$. Let $\cF$ and $\cG$ be sheaves of abelian groups on $X$ . For any open set $U\subseteq X$ show that the set $\Hom(\cF|_U,\cG|_U)$ of morphisms of the restricted sheaves has a natural structure of an abelian group. Show that the presheaf $U\mapsto \Hom(\cF_U,\cG|_U)$ is a sheaf. It is called the \emph{sheaf of local morphisms} of $\cF$ into $\cG$, ``sheaf hom'' for short, and is denoted $\sHom(\cF,\cG)$.
	\begin{proof}
		We first show that $\Hom(\cF|_U,\cG_U)$ is an abelian group. This is easy; we simply define $(f+g)(U) = f(U) + g(U) \in \Hom_{\text{Ab}}(\cF(U), \cG(U))$. The zero morphism $0:\cF\to \cG$ defined $0(U)(s) = 0$ is the identity and the inverse of a map $f:\cF\to \cG$ is the morphism $-f:\cF\to \cG$ defined on sections by $(-f)(U)(s) = -f(U)(s)$. This addition is compatible with restrictions.

		Note that $\sHom(\cF,\cG)$ is indeed a presheaf -- it associates an abelian group to every $U\subseteq X$ and for every inclusion $V\subseteq U$ we get a restriction $\Hom(\cF|_U,\cG|_U) \to \Hom(\cF|_V,\cG_V)$ given by restriction a morphism $f:\cF|_U\to \cG|_U$ to $\cF|_V\to \cG|_V$ (here we are technically using the fact that $(\cF|_U)|_V \cong \cF|_V$). We therefore need only show the two locality conditions hold for $\sHom(\cF,\cG)$.

		\bigskip

		\emph{Identitiy Axiom:} ~ Suppose $f$ is a section of $\Hom(\cF|_U,\cG|_U)$, i.e. that it is a map $f:\cF|_U\to \cG|_U$, such that $f|_{V_i} = 0$ on some open cover $\{V_i\}$ of $U$. Take some other open set $W \subseteq U$ and let $W_i = W\cap V_i$. Take some section $s \in \cF(W)$. For each $i$, the diagram
		\begin{center}
			\begin{tikzcd}
				\cF(W) \arrow[r,"f(W)"] \arrow[d,"\rho"] & \cG(W) \arrow[d,"\rho"] \\
				\cF(W_i) \arrow[r,"f(W_i)"] & \cG(W_i)
			\end{tikzcd}
		\end{center}
		commutes and $f|_{W_i} = f(W_i)$ by definition, so we get that $f(W_i)(s|_{W_i}) = 0$ for each $i$. The commutativity of the diagram paired with the fact that $\cG$ is a sheaf gives us that $f(W)(s) = 0$, since the $\cG$ section $f(W)(s)$ restricts to zero on $W_i$ for each $i$. Because $s$ was chosen to be an arbitrary section $f(W)$ must be zero and because $W$ was chosen to be an arbitrary open subset of $U$ the morphism $f:\cF|_U\to \cG|_U$ must be zero. This proves the first sheaf axiom.

		\bigskip

		\emph{Gluing Axiom:}~ Suppose now that we have morphisms $f_i:\cF|_{V_i}\to \cG|_{V_i}$ on some open cover $\{V_i\}$ of an open set $W\subseteq U$ such that $f_i(V_i\cap V_j) = f_j(V_i\cap V_j)$. We can define a morphism $f:\cF|_W\to \cG|_W$ which restricts to $f_i$ on $V_i$ as follows.

		Fix an arbitrary section $s \in \cF(W)$, restrict it to $V_i$ and map it to $\cG|_{V_i}$. This is $f_i(V_i)(s|_{V_i})$. The restriction of this $\cG(V_i)$ section to $V_i\cap V_j$ is $f_i(V_i)(s|_{V_i})|_{V_j} = f_i(V_i)(s|_{V_i\cap V_j})$ by the commutativity requirement satisfied by $f_i(V_i)$ and furthermore $f_i(V_i)(s|_{V_i\cap V_j}) = f_j(V_j)(s|_{V_i\cap V_j}) = f_j(V_j)(s|_{V_j})|_{V_i}$ since $f_i$ and $f_j$ agree on overlaps. Hence $\{f_i(V_i)(s|_{V_i})\}_i$ form a collection of sections in $\cG(V_i)$ which agree on overlaps, so there is some unique $x \in \cG(W)$ which restricts to $f_i(V_i)(s|_{V_i})$ on $V_i$. Now define $f(W)(s) = x$. This is the only thing we could possibly do, since $x$ is the unique element which satisfies $x|_{V_i} = f(V_i)(s|_{V_i})$ for all $i$. One can see that $f$ is compatible with restrictions by definition (we \emph{definted} it by lifting restrictions on a cover) and that $f(W')$ is a homomorphism of abelian groups by tracing a sum $s + t$ of sections in $\cF(W')$ through the same restriction diagrams and lifting to $\cG(W')$.
	\end{proof}
	\item A sheaf $\cF$ on a topological space $X$ is \emph{flasque} if for every inclusion $V\subseteq U$ of open sets, the restriction map $\cF(U) \to \cF(V)$ is surjective.
	\begin{enumerate}[(a)]
		\item Show that a constant sheaf on an irreducible topological space is flasque.
		\item If $0 \to \cF' \to \cF\to \cF''\to 0$ is an exact sequence of sheaves, and if $\cF'$ is flasque, then for any open set $U$, the sequence $o\to \cF'(U)\to \cF(U)\to \cF''(U)\to 0$ of abelian groups is also exact.
		\item If $0 \to \cF' \to \cF \to \cF''\to 0$ is an exact sequence of sheaves and if $\cF'$ and $\cF$ are flasque, then $\cF''$ is flasque.
	\end{enumerate}
	\begin{proof}$ $
		\begin{enumerate}[(a)]
			\item If $U \subseteq X$ then $U$ is also irreducible, indeed, if $U = (X\cap F_1)\cup (X \cap F_2)$ for some closed sets $F_1,F_2 \subseteq X$, then $X = U^c \cup F_1 \cup F_2$. It therefore suffices to consider the inclusion $U\subseteq X$ of an open set $U$. Let $f \in A(U)$ be a section of $\cC(U)$ where $A$ is the constant sheaf on $X$ (see the definition in exercise II.1.1) and let $a \in \img f$. The sets $\{a\}$ and $\img f\setminus \{a\}$ are both open and closed because $A$ is endowed with the discrete topology, hence $f^{-1}(a)\cup f^{-1}(\img f\setminus \{a\}) = U$ is a decomposition of $U$ into closed subsets. As $U$ is irreducible, one of these must be empty, and it must be $f^{-1}(\img f\setminus \{a\})$ since we chose $a\in \img f$. This implies $f$ is the constant function $x \mapsto a$, and is the restriction of the same function on $X$ to $U$.
			\item 
		\end{enumerate}
	\end{proof}
	\item Let $X$ be a topological space, let $P$ be a point, and let $A$ be an abelian group. Define a sheaf $i_P(A)$ as follows: $i_P(A)(U) = A$ if $P\in U$, $0$ otherwise. Verify that the stalk of $i_P(A)$ is $A$ at every point $Q\in \{P\}^-$ in the closure of $P$, and $0$ elsewhere. Hence the name ``skyscraper sheaf''. Show that this sheaf could also be described as $i_*(A)$ where $A$ denotes the constant sheaf $A$ on the closed subspace $\{P\}^-$ and $i\{P\}^-\to X$ is the inclusion.
	\begin{proof}
		Suppose $Q\in \{P\}^-$ so that every open set $V$ containing $Q$ also contains $P$. Then $i_P(A)(V) = A$ for every such set by definition, and the restriction map $i_P(A)(V) \to i_P(A)(V')$ for $Q \in V' \subseteq V$ is the identity. Hence the stalk at $i_P(A)(V)$ is indeed $A$. If $Q$ is not in the closure of $\{P\}$ then there is some open set $V$ containing $Q$ which avoids $P$. Hence $i_P(A)(V) = 0$ and the stalk at $Q$ must necessarily be zero.

		Suppose now that $i_*(A)$ is the pushforward of the constant sheaf on $\{P\}^-$ via the inclusion $i:\{P\}^-\to X$. Any open subset of $\{P\}^-$ is given by the intersection of $\{P\}^-$ with $V\subseteq X$ open. If this intersection contains a point $Q$, then $V$ necessarily contains $P$ as well, since $Q$ is in the closure of $\{P\}$. This means every nonempty open subset of $\{P\}^-$ contains $P$, and in particular, any two open subsets meet. This implies that $\{P\}^-$ is connected and thus the constant sheaf $A$ on $\{P\}^-$ is simply the constant presheaf. The pushforward $i_*A$ is then
		\begin{align*}
			i_*A(V) = A(i^{-1}(V)) =
			\begin{cases}
				A & i^{-1}(V) \text{ nonempty } \iff P\in V\\
				0 & i^{-1}(V) = \empty \iff P\not\in V
			\end{cases}.
		\end{align*}
		This is exactly the skyscraper sheaf.
	\end{proof}
\item[\textsc{Exercise 1.21}] \label{prob:2_1_21}
\end{problemset}
\section{Schemes}
\begin{problemset}	
	\item[\textsc{Exercise 2.7.}] Let $X$ be a scheme. For any $x \in X$, let $\cO_x$ be the local ring at $x$, and $\frakm_x$ its maximal ideal. We define the \emph{residue field} of $x$ on $X$ to be the field $k(x) = \cO_x/\frakm_x$. Now let $K$ be any field. Show that to give a morphism of $\Spec K$ to $X$ it is equivalent to give a point $x \in X$ and an inclusion map $k(x) \to K$.
	\begin{proof}
		Suppose first that we have a map $f:\Spec K \to X$. Topologically, this is determined solely by choosing an image $x\in f(P)$ for the sole point $P\in \Spec K$. Sheaf theoretically, this consists of a map $f^\sharp:\cO_X \to f_*\cO_K$ (by $\cO_K$ we mean $\cO_{\Spec K}$). This induces a local ring map on the stalk at $P$: $f^\sharp_P:\cO_{X,x}\to (f_*\cO_{K})_P = K$, meaning that the maximal ideal $\frakm_x$ in $\cO_{X,x}$ is sent to the maximal ideal $(0) \subseteq K$, meaning that $\frakm_x = \ker f^\sharp_P$. This in turn implies that $f^{\sharp}_P$ factors through the quotient $\pi:\cO_{X,x} \mapsto k(x) = \cO_{X,x}/\frakm_x$ and hence induces a map $k(x) \to K$. This map is necessarily an inclusion since every ring homomorphism of fields is injective.

		Now suppose we have an injection $p:k(x) \hookrightarrow K$. We can then define a map $f^\sharp_x:\cO_{X,x}\to K$ by $f^{\sharp} = p\circ \pi$, where $\pi:\cO_{X,x}\to k(x)$ is the quotient map. This is precisely a map on between the stalks $\cO_{X,x}$ and $\cO_{K,P}$. If we define $f:\Spec K\to X$ by $P\mapsto x$ and $f^\sharp(U):\cO_X(U) \to f_*\cO_K(U) = K$ by $f^\sharp(U) = f^{\sharp}_x \circ \iota$ where $\iota:\cO_X(U) \to \cO_{X,x}$ is the natural localization map, then $(f,f^\sharp)$ is a map of schemes. Note that for any open set $U \subseteq X$ not containing $x$ the map $f^\sharp:\cO_X(U)\to f_*\cO_K(U)$ is necessarily the zero map, since $f_*\cO_K(U) = \cO_K(f^{-1}(U)) = \cO_K(\emptyset) = 0$.
	\end{proof}
	\item[\textsc{Exercise 2.11.}] Let $k = \bF_p$ be the finite field with $p$ elements. Describe $\Spec k[x]$. What are the residue fields of its points? How many points are there with a given residue field?
	\begin{proof}
		The ring $k[x]$ is a PID since $k$ is a field, so the prime ideals are all principally generated by irreducible polynomials $f \in k[x]$.
	\end{proof}
	\item[\textsc{Exercise 2.18.}]$ $
	\begin{enumerate}[(a)]
		\item Let $A$ be a ring, $X = \Spec A$ $f \in A$. Show that $f$ is nilpotent if and only if $D(f)$ is empty.
		\item Let $\varphi:A\to B$ be a ring homomorphism and let $f:\Spec B\to \Spec A$ be the induced morphism of affine schemes. Show that $\varphi$ is injective if and only if the map of sehaves $f^\sharp:\cO_X \to f_*\cO_X$ is injective. Show furthermore in that case $f$ is \emph{dominant}, i.e. $f(\Spec B)$ is dense in $X$.
	\end{enumerate}
	\begin{proof}
		\begin{enumerate}[(a)]
			\item Recall that the nilradical of any ring is equal to the intersection of all its prime ideals. Therefore
				\begin{align*}
					f \text{ is nilpotent } \iff f \in \bigcap_{\frakp \in \Spec A} \frakp \iff V(f) = \Spec A \iff D(f) = \emptyset.
				\end{align*}
			\item Note first that if $f^\sharp:\cO_{\Spec A}\to f_*\cO_{\Spec B}$ is injective then it is injective on global sections and hence $\varphi = f^\sharp(\Spec A): A\to B$ is injective. Suppose instead that $f^\sharp$ is not injective, so that there is some $U\subseteq \Spec A$ such that $f^\sharp(U):\cO_{\Spec A}(U) \to \cO_{\Spec(B)}(f^{-1}(U))$ which is not an injective ring homomorphism. By taking $f\in A$ such that $D(f) \subseteq U$ (which exists since the sets $D(f)$ are basic opens) we can assume that $U = D(f)$. In this case, the map $f^\sharp(D(f))$ is the map $\varphi_f:A_f \to B_{\varphi(f)}$. If this is not injective, then there is some $n\in \bN$ such that $\varphi(f^n)\varphi(a) = 0\implies \varphi(f^n\cdot a) = 0$ such that $f^na\neq 0$, and hence $\varphi$ is not injective.

				Suppose now that $\varphi:A\to B$ is injective. The map $f$ is dominant if and only if $f(\Spec B)$ has nontrivial intersection with every (nonempty) basic open $D(f)$. Fix then a nonempty $D(f)$, which by part (a) means $f$ is not nilpotent. Localizing at $f$ yields a map $\varphi_f:A_f \to B_{\varphi(f)}$. Pulling back a maximal ideal $\frakm \in \Spec B_{\varphi(f)}$ by $\varphi_f$ yields a prime ideal in $\frakp$ in $A_f$, and then by the correspondence between $\Spec A_f$ and primes in $\Spec A$ which do not contain $f$, we get that $f(\frakm) = \varphi^{-1}(\frakm) = \frakp \in D(f)$. Hence the image of $f$ is dense in $\Spec A$.
		\end{enumerate}
	\end{proof}
\end{problemset}
\end{document}
