\input{../preamble.tex}

% lecture commands
\newcounter{lecture-counter}
\newcommand{\lecture}[2]
{
	\newpage
	\addtocounter{lecture-counter}{1}
    \tchap{Lecture \arabic{lecture-counter}}
	\vspace{-1.5em}
    \begin{center}
	    \small \emph{Recorded: #1 \hspace{1.5em} Notes: #2}
    \end{center}
}

% start document
\begin{document}
\pagestyle{empty}
	\LARGE
\begin{center}
	Lecture Notes from Differential Geometry (Michaelmas 2021) \\
	\Large
	Isaac Martin \\
    Last compiled \today
\end{center}
\normalsize
\vspace{-2mm}
\hru
\tableofcontents

\lecture{2022-03-09}{2022-03-09}

\begin{cor}\label{cor:roots-of-unity-and-n-torsion}
	If $E[n] \subseteq K(K)$ then $\mu_n \subseteq K$, where $\mu_n$ is the set of $n$th roots of unity in $\ol{K}$.
\end{cor}
\begin{prf}
	If $e_n$ is nondegenerate then there exist $S,T \in E[n]$ such that $e_n(S,T)$ is a primitive $n^{th}$ root of unit, say $\zeta_n$. Then $\sigma(\zeta_n) = e_n(\sigma S,\sigma T) = e_n(S,T) = \zeta_n$ for all $\sigma \in \Gal(\olK/K)$. The first equality follows from Galois equivalence and the second since $S,T \in E(K)$. Therefore $\zeta_n \in K$.
\end{prf}
\begin{example}
	There exists no $E/\bQ$ such that $E(\bQ)_{tors} \cong (\bZ/3\bZ)^2$.
\end{example}
\begin{rmk}
	In fact, the Weil pairing is alternating, i.e. $e_n(T, T) = 1$ for all $T \in E[n]$. In particular, expanding $e_n(S+T,S+T)$ show $e_n(S,T) = e_n(T,S)^{-1}$.
\end{rmk}
\section{Galois Cohomology}
Throughout this section, $G$ is a group and $A$ is a $G$-module, i.e. and abelian group with an action of $G$ via group homomorphisms. That is, we have a map $G \to \Aut(A)$ where $\Aut(A)$ is the group of abelian group homomorphisms of $A$, and $g\cdot a = g(a)$. To say that $A$ is a $G$=module is equivalent to saying that $A$ is a $\bZ[G]$-module.

\begin{defn}\label{defn:basic-homology-defs}
	We set
	\begin{align*}
		H^0(G,A) = A^G = \{a \in A ~\mid~ \sigma(a) = a, ~ \forall \sigma \in G\}.
	\end{align*}
	We further set
	\begin{align*}
		C^1(G,A) &= \{\text{maps } G\to A\} & \text{``cochains''} \\
		Z^1(G,A) &= \{(a_\sigma)_{\sigma \in G} ~ \mid ~ a_{\sigma \tau} = \sigma(a_\tau) + a_\sigma\} & ``cocycles'' \\
		B^1(G,A) &= \{(\sigma b - b)_{\sigma \in G} ~ \mid ~ b \in A\} & \text{``coboundariers''}
	\end{align*}
	and we have inclusions $B^1(G,A) \subseteq Z^1(G,A) \subseteq C^1(G,A)$. We define $H^1(G,A) = Z^1(G,A)/B^1(G,A)$.
\end{defn}
\begin{rmk}
	If $G$ acts trivially on $A$, then $H^1(G,A) = \Hom(G,A)$.
\end{rmk}
\begin{thm}\label{thm:ses-induces-les-on-cohomology}
	A short exact sequence of $G$-modules
	\begin{align*}
		0 \to A \to{\phi} B \to{\psi} C \to 0
	\end{align*}
	gives rise to a long exact sequence of abelian groups
	\begin{align*}
		0 \to A^G \to[\phi] B^G \to[\psi] C^G \to[\delta] H^1(G,A) \to[\phi_*] H^1(G,B) \to[\psi_*] H^1(G,C) \to ...
	\end{align*}
	where we stop before $H^2(G,A)$ because we have yet to define it. The map $\delta$ arises from the snake lemma.
\end{thm}
\begin{defn}\label{defn:delta-in-les-cohomology}
	Let $c \in C^G$. Then there exists a $b \in B$ such that $\psi(b) = c$. Then
	\begin{align*}
		\psi(\sigma b - b) = \sigma(c) - c= 0
	\end{align*}
	for all $\sigma \in G$. This means $\sigma b - b = \phi(a_\sigma)$ for some $a_\sigma \in A$. One checks that $(a_\sigma)_{\sigma \in G} \in Z^1(G,A)$. We define $\delta(c) = \text{ chars of } (a_\sigma)_{\sigma \in G}$ in $H^1(G,A)$.
\end{defn}
\begin{thm}\label{thm:normal-subgroup-exact-sequence}
	Let $A$ be a $G$-module $H \subseteq G$ a normal subgroup. Then there is an inflation-restriction exact sequence
	\begin{align*}
		0 \to H^1(G/H,A^H) \to{\inf} H^1(G,A) \to{\res} H^1(H,A)
	\end{align*}
\end{thm}
\begin{prf}
	Omitted.
\end{prf}
Let $K$ be a perfect field. $\Gal(\olK/K)$ is then a topological group with basis of open subgroups. The sets $\Gal(\olK/L)$ for $[L:K] < \infty$.

If $G = \Gal(\olK/K)$ then we modify the definition of $H^1(G,A)$ by insisting
\begin{enumerate}
	\item The stabilizer of each $a \in A$ is an open subgroup of $G$.
	\item All cochains $G \to A$ are continuous where $A$ is given by the discrete topology.
\end{enumerate}
Then
\begin{align*}
	H^1(\Gal(\olK/K),A) = \varinjlim_{L, ~L/K \text{finite Galois}} H^1(\Gal(L/K), A^{\Gal(\olK/L)}).
\end{align*}
The direct limit is with respect to inflation maps (what are inflation maps?).

\begin{thm}[Hilbert's Theorem 90]\label{thm:Hilbert90}
	Let $L/K$ be a finite Galois extension. Then $H^1(\Gal(L/K),L^*) = 0$.
\end{thm}
\begin{prf}
	Let $G = \Gal(L/K)$. Let $(a_\sigma)_{\sigma \in G} \in Z^1(G,L^*)$. Distinct automorphisms are linearly independent, hence there exists some $y \in L$ such that
	\begin{align*}
		\underbrace{\sum_{\tau \in G} a_\tau^{-1} \tau(y)}_x \neq 0.
	\end{align*}
	For $\sigma \in G,$
	\begin{align*}
		\sigma(x) = \sum_{\tau \in G} \sigma(a_\tau)^{-1} \sigma \tau(y) = a_\sigma \sum_{\tau \in G} a_\sigma^{-1} \sigma \tau (y) = a_\sigma \cdot x.
	\end{align*}
	Therefore $a_\sigma = \sigma(x)/x \implies (a_\sigma)_{\sigma \in G} \in B^1(G,L^*)$. Hence $H^1(G,L^*)$.
\end{prf}

\begin{cor}\label{cor:vanishing-first-cohomology}
	$H^1(\Gal(\olK/K),\olK^*) = 0$.
\end{cor}
Application: Assume $\fchar K \not | n$. There is an exact sequence of $\Gal(\olK/K)$-modules
\begin{align*}
	0 \to \mu_n \to \olK^* \to[x\mapsto x^n] \olK^* \to 0.
\end{align*}
Have a long exact sequence
\begin{align*}
	K^* \to[x \mapsto x^n] K^* \to H^1(\Gal(\olK/K),\mu_n) \to H^1(\Gal(\olK/K),\olK^*),
\end{align*}
but $H^1(\Gal(\olK/K),\olK^*) = 0$ by Theorem (\ref{thm:Hilbert90}). Therefore $H^1(\Gal(\olK/K),\mu_n) \cong K^*/(K^*)^n$. 

If $\mu_n \subseteq K$ then $\Hom_{cts}(\Gal(\olK/K),\mu_n)\cong K^*/(K^*)^n$.

If $L/K$ is a finite Galois extension then $\Gal(\olK/K) \to{\pi} \Gal(L/K)$ and hence
\begin{align*}
	\Hom(\Gal(L,K),\mu_n) \hookrightarrow \Hom_{cts}(\Gal(\olK/K),\mu_n) \cong  K^*/(K^*)^n,
\end{align*}
where the above map is given by $\chi \mapsto \chi \circ \pi$. The image is a finite subgroup $\Delta \subseteq K^*/(K^*)^n$. 

If $\Gal(L/K)$ is abelian of exponent dividing $n$ then
\begin{align*}
	[L:K] = |\Gal(L/K)| = |\Hom(\Gal(L/K),\mu_n)| = |\Delta|.
\end{align*}
Compare to Theorem 11.2 from lectures \red{Fix numbering}.

\textbf{Notation:} We'll write $H^1(K,-) = H^1(\Gal(\olK/K),-)$ to avoid writing $\Gal$ and $\olK$ every time.

\begin{lem}\label{lem:finite-padic-ext}
	Let $[K:\bQ_p] < \infty$. Then
	\begin{align*}
		\ker(H^1(K,\mu_n) \to H^1(K^{nr},\mu_n)) \subseteq \{x \in K^*/(K^*) ~ \mid~ v(x) \equiv 0 ~ (\mod n)\}.
	\end{align*}
	remember that $K^{nr}$ is the maximal unramified extension of $K$.
\end{lem}
\begin{prf}
	By Theorem (\ref{thm:Hilbert90}), identify $H^1$
\end{prf}

\lecture{2022-03-11}{2022-03-11}
\begin{lem}\label{lem:ker-of-H1}
	Let $K:\bQ_p] < \infty$. Then
	\begin{align*}
		\ker(H^1(K,\mu_n)\to H^1(K^{nr},\mu_n)) \subseteq \{ x \in K^*/(K^*)^n ~ \mid ~ v(x) \equiv 0 ~(\mod n)\}
	\end{align*}
\end{lem}
\begin{prf}
	(Continued). The discrete valuation $v: K^*\to \bZ$ extends to $v:(K^{nr)^* \to \bZ})$. Then $v(x) = nv(y) \equiv 0 ~(\mod n)$.
\end{prf}

\textbf{EXERCISE:} (in local fields.) Show that if $p \not | n$ then $\subseteq$ is actually $=$.

Let $\phi:E\to E'$ be an isogeny of elliptic curves over $K$. Then there is a short exact sequence of $\Gal(\olK/K)$-modules
\begin{align*}
	0 \to E[\phi] \to E \to{\phi} \to E' \to 0.
\end{align*}
Long-exact sequence:
\begin{align*}
	E(K) \to{\phi} E'(K) \to{\delta} H^1(K,E[\phi]) \to H^1(K,E) \to{\phi_*} H^1(K,E').
\end{align*}
We get a short exact sequence
\begin{align*}
	0 \to \frac{E'(K)}{\phi E(K)} \to H^1(K,E[\phi]) \to H^1(K,E)[\phi*] \to 0.
\end{align*}
Now take $K$ to be a number field. For each place $v$ fix an embedding $\olK \subseteq \olK_v$. Then $\Gal(\olK_v/K_v) \subseteq \Gal(\olK/K)$. This gives us a short exact sequence resembling the one above:
\begin{align*}
	0 \to \prod_v\frac{E'(K_v)}{\phi E(K_v)} \to \prod_vH^1(K_v,E[\phi]) \to \prod_{ v }H^1(K_v,E)[\phi*] \to 0.
\end{align*}
These products just mean that we have an exact sequence
\begin{align*}
	0 \to \frac{E'(K_v)}{\phi E(K_v)} \to H^1(K_v,E[\phi]) \to H^1(K_v,E)[\phi*] \to 0
\end{align*}
for each place $v$. We also have the following commutative diagram with exact rows:
\begin{center}
\begin{tikzcd}
	0 \arrow[r]& \frac{E'(K)}{\phi E(K)}\arrow[d] \arrow[r,"\delta"]& H^1(K,E[\phi]) \arrow[rd] \arrow[d,"res_v"] \arrow[r] & H^1(K,E)[\phi*]\arrow[d,"res_v"] \arrow[r]& 0 \\
	
	0 \arrow[r]& \prod_v\frac{E'(K_v)}{\phi E(K_v)} \arrow[r]& \prod_vH^1(K_v,E[\phi]) \arrow[r] &\prod_{ v }H^1(K_v,E)[\phi*] \arrow[r] & 0. 
\end{tikzcd}	
\end{center}
This leads us to the definition of the \emph{Selma group}.
\begin{defn}\label{defn:selma-group}
	The $\phi$-Selma group is
	\begin{align*}
		S^{(\phi)}(E/K) &= \ker(\text{downward diagonal map above}) \\
						&= \ker\big(H^1(K,E[\phi])\to \prod_v H^1(K_v,E)\big) \\
						&= \{ \alpha \in H^1(K,E[\phi]) ~\mid~ \res_v(\alpha) \in \img(\delta_v) ~ \forall v\}.
	\end{align*}
	The \emph{Tate Shaferevich group is }
	\begin{align*}
		\text{look at picture and fill in}, weird disjoint union looking symbol with three vertical strokes.
	\end{align*}
\end{defn}
We get a short-exact sequence
\begin{align*}
	0 \to \frac{E'(K)}{\phi E(K)} \to S^{(\phi)}(E/K) \to \tateshaf(E/K)[\phi_*] \to 0.
\end{align*}
Taking $\phi = [n]$ gives
\begin{align*}
	0 \to \frac{E(K)}{nE(K)}\to S^{(n)}(E/K) \to \tateshaf(E/K)[n] \to 0.
\end{align*}
Rearranging the proof of weak Mordell-Weil gives
\begin{thm}\label{thm:S-is-finite}
	$S^{(n)}(E/K)$ is finite.
\end{thm}
\begin{prf}
	For $L/K$ a finite Galois extension there is an exact sequence
	\begin{align*}
		0 \to H^1(\Gal(L/K), E(L)[n]) \to{\inf} H^1(K,E[n]) \to{\res} H^1(L,E[n]).
	\end{align*}
	The first nonzero term above is finite, and $S^{(n)}(E/K) \to S^{(n)(E/L)}$ is induced by $\res$ since $S^{(n)}(E/K) \subseteq H^1(K,E[n])$ and $S^{(n)(E/L) \subseteq H^1(L,E[n])}$. Therefore, by extending our field, we may assume $E[n] \subseteq E(K)$ and hence $\mu_n \subseteq K$. This implies that $E[n] \cong \mu_n \times \mu_n$ as a $\Gal(\olK/K)$-module.

	Therefore $H^1(K,E[n]) \cong H^1(K,\mu_n) \times H^1(K,\mu_n)\cong K^*/(K^*)^n \times K^*/(K^*)^n$. Let
	\begin{align*}
		S = \text{primes of bad reduction for $E/K$} \cup \{v \mid n \infty\}.
	\end{align*}
	N.B. This is a finite set of places.
\end{prf}

\begin{defn}\label{defn:unramifiedoutsideS}
	The subgroup of H^1(K,A) unramified outside $S$ is
	\begin{align*}
		H^1(K,A;S) = \ker\big(H^1(K,A)\ to \prod_{v\not\in S} H^1(K_v^{nr},A)\big)
	\end{align*}
	There is a commutative diagram with exact rows 
	\begin{center}
		<put commutative diagram here>
	\end{center}
	This map is surjective (the $x_n$ map) for all $v \not\in S$ (see Theorem 9.7 from class) therefore $\Img(\delta_v) \subseteq \ker(\text{green downward map})$.
\end{defn}
\begin{lem}
	Let $\ker\big(H^1(K,\mu_n) \to H^1(K^{nr},\mu_n)\big) \subseteq \{x \in K^*/(K^*)^n ~ \mid ~ v(x) \equiv 0 ~ (\mod n)\}$.
	Therefore
	\begin{align*}
		S^{(n)}(E/K) &= \left\{\alpha \in H^1(K, E[n]) ~\mid ~ \res_v(\alpha) \in \Img(\delta_v) ~ \forall v\right\} \\
					 &\subseteq H^1(\K,E[n]; S) \\
					 &\cong H^1(K,\mu; S) \times H^1(K,\mu_n ; S) \\
					 &\cong K(S,n)\times K(S,n).
	\end{align*}
	But $K(S,n)$ is finite by Lemma 11.4, therefore $S^{(n)}(E/K)$ is finite.
\end{lem}

\begin{rmk}
	$S^{(n)A}(E/K)$ is finite and effectively computable. If is conjectured that $|\tateshaf(E/K) < \infty$. This would imply that $\rankE(K)$ is effectively computable.
\end{rmk}

\section{Descent by cyclic isogeny}
Let $E$ and $E'$ be elliptic curves over a number field $K$, and let $\phi:E\to E'$ be an isogeny of degree $n$. Suppose $E'[\hat{\phi}] \cong \bZ/n\bZ$ as a Galois module $S\mapsto e_\phi(S,T)$. Short-exact sequence of $\Gal(\olK/K)$-modules
\begin{align*}
	0\to \mu_n \to E\to{\phi} E' \to 0.
\end{align*}
Long exact sequence
\begin{center}
	\begin{tikzd}
		... \arrow[r]& E(K) \arrow[r,"\phi"] & E'(K)\arrow[r,"\delta"] \arrow[rd,"\alpha"] & H^1(K,\mu_n) \arrow[r] \arrow[d, "\cong"]& ... \\
					 & & & K^*/(K^*)^n & 
	\end{tikzd}
\end{center}
\begin{thm}
	Let $f \in K(E')$ and $g \in K(E)$ with $\div(f) = n(T) - n(P)$ and $\phi^*f = g^n$. Then $\alpha(P) = f(P) ~ \mod(K^*)^n$ for all $P \in E'(K) \setminus \{0,T\}$.
\end{thm}
\begin{prf}
	Let $Q \in \phi^{-1}P$. Then $\delta(P)$ is represented by the cocycle $\sigma \mapsto \sigma Q - Q \in E[\phi] \cong \mu_n$.
	\begin{align*}
		e_\phi(\sigmaQ - Q, T) &= \frac{g(rQ - Q + X)}{gX)} &\text{ for any  } x\in E\setminus \text{zeros and poles} \\
							   &=  \frac{g(\sigma Q)}{g(Q)} & x = Q \\
							   &= \frac{\sigma \sqrt[n]{f(P)}}{\sqrt[n]{f(P)}} & \text{N.B.} f(P) = g(Q)^n
	\end{align*}
	Therefore $\delta(P)$ is represented by the cocycle $\sigma \mapsto \frac{\sigma(\sqrt[n]{f(P)})}{\sqrt[n]{f(P)}}$. But $H^1(K,\mu_n) \cong K^*/(K^*)^n$, $\\big(\sigma \mapsto \frac{\sigma(\sqrt[n]{x})}{ \sqrt[n]{x} }\big) \mapsfrom x$. Therefore $\alpha(P) = f(P) ~\mod(K^*)^n$.
\end{prf}
\end{document}
